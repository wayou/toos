{"version":3,"file":"toos.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/toos.ts"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/*\n * @author: wayou\n * @date: 2018-08-28 12:12:54\n * @description: a simple toast\n */\n\nimport \"./toos.scss\";\n\nexport interface ToastOptions {\n  style?: string;\n  class?: string;\n  duration?: number;\n}\n\ntype messageType = string | number;\n\nexport default class Toast {\n  /**\n   * show the toast\n   *\n   * @static\n   * @param {showOption} options\n   * @memberof Toast\n   */\n  public static show(message: messageType, options: ToastOptions) {\n    let _options = Object.assign({}, this.defaultOptions, options);\n\n    let element = document.getElementById(`toast`);\n    if (this.timer) {\n      window.clearTimeout(this.timer);\n      this.timer = null;\n      this._hide(element);\n    }\n    if (!element) {\n      element = this._create(message, _options);\n    } else {\n      this._applyOption(element, message, _options);\n    }\n\n    this._show(element);\n    this.timer = window.setTimeout(() => {\n      this._hide(element);\n    }, _options.duration);\n  }\n\n  private static defaultOptions: ToastOptions = {\n    class: \"\",\n    duration: 3000,\n    style: \"\"\n  };\n\n  private static timer: number | null = null;\n\n  /**\n   * apply options for each show\n   * @param element the root element of the toast\n   * @param message message to show\n   * @param options toast options\n   */\n  private static _applyOption(\n    element: HTMLElement,\n    message: messageType,\n    options: ToastOptions\n  ) {\n    element.className = `${options.class}`;\n    if (options.style) {\n      element.style.cssText = `${options.style};`;\n    }\n    element.innerHTML = `${message}`;\n  }\n\n  /**\n   * create toast element and append to page\n   * @param message message to show\n   * @param options toast options\n   */\n  private static _create(\n    message: messageType,\n    options: ToastOptions\n  ): HTMLElement {\n    const element = document.createElement(\"div\");\n    element.setAttribute(\"id\", \"toast\");\n    this._applyOption(element, message, options);\n    document.body.appendChild(element);\n    return element;\n  }\n\n  /**\n   * set the `show` class name to show the toast\n   * @param element the root element of the toast\n   */\n  private static _show(element: HTMLElement | null) {\n    if (element) {\n      element.className += \"show\";\n    }\n  }\n\n  /**\n   * remove the `show` class name to hide the toast\n   * @param element the root element of the toast\n   */\n  private static _hide(element: HTMLElement | null) {\n    if (element) {\n      element.className = element.className.replace(\"show\", \"\");\n    }\n  }\n}\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Toast","show","Toast.show","message","options","_options","Object","assign","defaultOptions","element","getElementById","timer","window","clearTimeout","_hide","_applyOption","_create","_show","setTimeout","_this","duration","Toast._applyOption","className","class","innerHTML","Toast._create","setAttribute","body","Toast._show","Toast._hide","replace"],"mappings":"oLAAAA,SAAoB,CAACC,CAAD,CAAMC,CAAN,CAAW,CAChB,IAAK,EAAlB,GAAKA,CAAL,GAAsBA,CAAtB,CAA4B,EAA5B,CACIC,EAAAA,CAAWD,CAAAC,SAEf,IAAKF,CAAL,EAAgC,WAAhC,GAAY,MAAOG,SAAnB,CAAA,CAEA,IAAIC,EAAOD,QAAAC,KAAPA,EAAwBD,QAAAE,qBAAA,CAA8B,MAA9B,CAAA,CAAsC,CAAtC,CAA5B,CACIC,EAAQH,QAAAI,cAAA,CAAuB,OAAvB,CACZD,EAAAE,KAAA,CAAa,UAEI,MAAjB,GAAIN,CAAJ,CACME,CAAAK,WAAJ,CACEL,CAAAM,aAAA,CAAkBJ,CAAlB,CAAyBF,CAAAK,WAAzB,CADF,CAGEL,CAAAO,YAAA,CAAiBL,CAAjB,CAJJ,CAOEF,CAAAO,YAAA,CAAiBL,CAAjB,CAGEA,EAAAM,WAAJ,CACEN,CAAAM,WAAAC,QADF,CAC6Bb,CAD7B;AAGEM,CAAAK,YAAA,CAAkBR,QAAAW,eAAA,CAAwBd,CAAxB,CAAlB,CAnBF,CAJ6B,CAA/BD;kBCgBegB,cAQCA,CAAAC,KAAA,CAAdC,SAAmBC,EAAsBC,GAAzC,UACMC,EAAAA,CAAWC,MAAAC,OAAA,CAAc,EAAd,CAAkB,IAAAC,eAAlB,CAAuCJ,CAAvC,CAEf,KAAIK,EAAUrB,QAAAsB,eAAA,CAAwB,OAAxB,CACV,KAAAC,MAAJ,GACEC,MAAAC,aAAA,CAAoB,IAAAF,MAApB,CAEA,CADA,IAAAA,MACA,CADa,IACb,CAAA,IAAAG,MAAA,CAAWL,CAAX,CAHF,CAKKA,EAAL,CAGE,IAAAM,aAAA,CAAkBN,CAAlB,CAA2BN,CAA3B,CAAoCE,CAApC,CAHF,CACEI,CADF,CACY,IAAAO,QAAA,CAAab,CAAb,CAAsBE,CAAtB,CAKZ,KAAAY,MAAA,CAAWR,CAAX,CACA,KAAAE,MAAA,CAAaC,MAAAM,WAAA,CAAkB,WAC7BC,CAAAL,MAAA,CAAWL,CAAX,EADW,CAEVJ,CAAAe,SAFU,EAmBApB,EAAAe,aAAA,CAAfM,SACEZ,EACAN,EACAC,GAEAK,CAAAa,UAAA,CAAoB,EAApB,CAAuBlB,CAAAmB,MACnBnB,EAAAb,MAAJ,GACEkB,CAAAlB,MAAAO,QADF,CAC6BM,CAAAb,MAD7B,IAAA,CAGAkB,EAAAe,UAAA,CAAoB,EAApB,CAAuBrB,EAQVH,EAAAgB,QAAA,CAAfS,SACEtB,EACAC,GAEA,IAAMK,EAAUrB,QAAAI,cAAA,CAAuB,KAAvB,CAChBiB;CAAAiB,aAAA,CAAqB,IAArB,CAA2B,OAA3B,CACA,KAAAX,aAAA,CAAkBN,CAAlB,CAA2BN,CAA3B,CAAoCC,CAApC,CACAhB,SAAAuC,KAAA/B,YAAA,CAA0Ba,CAA1B,CACA,OAAOA,GAOMT,EAAAiB,MAAA,CAAfW,SAAqBnB,GACfA,CAAJ,GACEA,CAAAa,UADF,EACuB,MADvB,EASatB,EAAAc,MAAA,CAAfe,SAAqBpB,GACfA,CAAJ,GACEA,CAAAa,UADF,CACsBb,CAAAa,UAAAQ,QAAA,CAA0B,MAA1B,CAAkC,EAAlC,CADtB,EAzDa9B,EAAAQ,eAAA,CAA+B,CAC5Ce,MAAO,EADqC,CAE5CH,SAAU,GAFkC,CAG5C7B,MAAO,EAHqC,CAM/BS,EAAAW,MAAA,CAAuB,IAuDxC;"}